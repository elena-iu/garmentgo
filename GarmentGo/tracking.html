<!doctype html>
<html lang="de" x-data="trackingApp()" class="h-full bg-gray-50">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spende verfolgen - GarmentGo</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="icon" href="assets/garmentgo-favicon.png">
  <!-- Material Symbols -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,200..700,0..1,-50..200" />
  <link rel="stylesheet" href="/app.css">
  <script src="/app.js"></script>
</head>
<body class="h-full">
  <!-- App-Shell -->
  <div class="min-h-full flex flex-col">
    <!-- Header -->
    <div id="header-placeholder"></div>

    <!-- Hauptinhalt -->
    <main class="flex-1">
      <!-- Tracking-Bereich -->
      <section class="max-w-4xl mx-auto px-4 py-10">
        <div class="text-center mb-8">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Spende verfolgen</h1>
          <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            Geben Sie Ihren 6-stelligen Bestätigungscode ein, um den aktuellen Status Ihrer Spende zu erfahren.
          </p>
        </div>

        <!-- Tracking-Formular -->
        <div class="bg-white rounded-2xl shadow-sm ring-1 ring-gray-200 overflow-hidden mb-8">
          <div class="px-6 py-5 border-b">
            <h2 class="text-xl font-semibold">Bestätigungscode eingeben</h2>
          </div>
          <div class="p-6">
            <form @submit.prevent="trackDonation()">
              <div class="max-w-md mx-auto">
                <label class="block text-sm font-medium text-gray-700 mb-2">Bestätigungscode</label>
                <input 
                  type="text" 
                  x-model.trim="trackingCode" 
                  @input="trackingCode = trackingCode.replace(/[^A-HJ-NP-Za-hj-np-z2-9]/g,'').toUpperCase().slice(0,6)"
                  :class="['gg-input w-full text-center text-lg font-mono tracking-wider focus:border-emerald-500 focus:ring-emerald-500', (trackingCode && !isCodeValid(trackingCode)) ? 'ring-1 ring-rose-300 border-rose-300' : '']"
                  placeholder="ABC234"
                  maxlength="6"
                  required
                >
                <p class="mt-1 text-xs text-rose-600" x-show="trackingCode && !isCodeValid(trackingCode)">Code muss genau 6 Zeichen lang sein</p>
                <p class="mt-2 text-sm text-gray-500">Nur Buchstaben und Zahlen erlaubt</p>
              </div>
              <div class="mt-6 text-center">
                <button 
                  type="submit" 
                  class="px-8 py-3 rounded-lg bg-emerald-600 text-white font-semibold hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed"
                  :disabled="!isCodeValid(trackingCode)"
                >
                  Status abfragen
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Statusanzeige -->
        <div x-show="showStatus" x-transition class="bg-white rounded-2xl shadow-sm ring-1 ring-gray-200 overflow-hidden">
          <div class="px-6 py-5 border-b">
            <h2 class="text-xl font-semibold">Status Ihrer Spende</h2>
            <p class="text-sm text-gray-600">Code: <span class="font-mono" x-text="trackingCode"></span></p>
          </div>
          <div class="p-6">
            <!-- Status-Schritte -->
            <div class="max-w-3xl mx-auto">
              <div class="flex items-center justify-between mb-8">
                <!-- Schritt 1 -->
                <div class="flex flex-col items-center text-center flex-1">
                  <div class="w-12 h-12 rounded-full flex items-center justify-center mb-3" :class="status >= 1 ? 'bg-emerald-600 text-white' : 'bg-gray-200 text-gray-400'">
                    <span class="material-symbols-outlined text-2xl">inventory_2</span>
                  </div>
                  <h3 class="font-semibold text-sm" :class="status >= 1 ? 'text-emerald-600' : 'text-gray-400'">Spende erhalten</h3>
                  <p class="text-xs text-gray-500 mt-1">Bei uns eingegangen</p>
                </div>
                
                <!-- Pfeil 1 -->
                <div class="flex-1 flex justify-center">
                  <div class="w-full h-0.5" :class="status >= 2 ? 'bg-emerald-600' : 'bg-gray-200'"></div>
                </div>
                
                <!-- Schritt 2 -->
                <div class="flex flex-col items-center text-center flex-1">
                  <div class="w-12 h-12 rounded-full flex items-center justify-center mb-3" :class="status >= 2 ? 'bg-emerald-600 text-white' : 'bg-gray-200 text-gray-400'">
                    <span class="material-symbols-outlined text-2xl">local_shipping</span>
                  </div>
                  <h3 class="font-semibold text-sm" :class="status >= 2 ? 'text-emerald-600' : 'text-gray-400'">Wird geliefert</h3>
                  <p class="text-xs text-gray-500 mt-1">Ins Krisengebiet</p>
                </div>
                
                <!-- Pfeil 2 -->
                <div class="flex-1 flex justify-center">
                  <div class="w-full h-0.5" :class="status >= 3 ? 'bg-emerald-600 text-white' : 'bg-gray-200'"></div>
                </div>
                
                <!-- Schritt 3 -->
                <div class="flex flex-col items-center text-center flex-1">
                  <div class="w-12 h-12 rounded-full flex items-center justify-center mb-3" :class="status >= 3 ? 'bg-emerald-600 text-white' : 'bg-gray-200 text-gray-400'">
                    <span class="material-symbols-outlined text-2xl">check_circle</span>
                  </div>
                  <h3 class="font-semibold text-sm" :class="status >= 3 ? 'text-emerald-600' : 'text-gray-400'">Erfolgreich ausgeliefert</h3>
                  <p class="text-xs text-gray-500 mt-1">An Bedürftige</p>
                </div>
              </div>

              <!-- Status-Nachricht -->
              <div class="text-center">
                <div class="inline-flex items-center gap-4 p-6 rounded-xl border-2 max-w-md" :class="statusMessage.bgClass">
                  <div class="flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center" :class="statusMessage.iconBgClass">
                    <span class="material-symbols-outlined text-2xl" :class="statusMessage.iconClass" x-text="statusMessage.icon"></span>
                  </div>
                  <div class="text-left">
                    <h4 class="font-semibold text-base" :class="statusMessage.textClass" x-text="statusMessage.title"></h4>
                    <p class="text-sm mt-1" :class="statusMessage.textClass" x-text="statusMessage.description"></p>
                  </div>
                </div>
              </div>

              
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <div id="footer-placeholder"></div>
  </div>

  <script>
    function trackingApp() {
      return {
        trackingCode: '',
        showStatus: false,
        status: 0,
        statusMessage: {
          icon: '',
          title: '',
          description: '',
          bgClass: '',
          textClass: '',
          iconBgClass: '',
          iconClass: ''
        },

        isCodeValid(code) {
          return /^[A-HJ-NP-Z2-9]{6}$/.test(code);
        },

        trackDonation() {
          if (!this.isCodeValid(this.trackingCode)) return;
          
          // Zufälliger Status (0-3, wobei 0 bedeutet noch nicht eingegangen)
          this.status = Math.floor(Math.random() * 4);
          
          // Status-Nachricht basierend auf Status setzen
          if (this.status === 0) {
            this.statusMessage = {
              icon: 'schedule',
              title: 'Spende noch nicht eingegangen',
              description: 'Ihre Spende ist noch nicht bei uns angekommen. Bitte warten Sie noch etwas oder kontaktieren Sie uns.',
              bgClass: 'bg-yellow-50 border-yellow-300',
              textClass: 'text-yellow-800',
              iconBgClass: 'bg-yellow-100',
              iconClass: 'text-yellow-600'
            };
          } else if (this.status === 1) {
            this.statusMessage = {
              icon: 'inventory_2',
              title: 'Spende erhalten',
              description: 'Ihre Spende ist bei uns eingegangen und wird derzeit sortiert und vorbereitet.',
              bgClass: 'bg-blue-50 border-blue-300',
              textClass: 'text-blue-800',
              iconBgClass: 'bg-blue-100',
              iconClass: 'text-blue-600'
            };
          } else if (this.status === 2) {
            this.statusMessage = {
              icon: 'local_shipping',
              title: 'Wird ins Krisengebiet geliefert',
              description: 'Ihre Spende ist auf dem Weg ins Krisengebiet und wird in Kürze an Bedürftige verteilt.',
              bgClass: 'bg-orange-50 border-orange-300',
              textClass: 'text-orange-800',
              iconBgClass: 'bg-orange-100',
              iconClass: 'text-orange-600'
            };
          } else if (this.status === 3) {
            this.statusMessage = {
              icon: 'check_circle',
              title: 'Erfolgreich ausgeliefert',
              description: 'Ihre Spende wurde erfolgreich an Bedürftige im Krisengebiet verteilt. Vielen Dank für Ihre Hilfe!',
              bgClass: 'bg-emerald-50 border-emerald-300',
              textClass: 'text-emerald-800',
              iconBgClass: 'bg-emerald-100',
              iconClass: 'text-emerald-600'
            };
          }
          
          this.showStatus = true;
        },

        resetTracking() {
          this.trackingCode = '';
          this.showStatus = false;
          this.status = 0;
        }
      };
    }
  </script>
</body>
</html>
